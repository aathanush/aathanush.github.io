import { NgForOf } from '@angular/common';
import { ChangeDetectionStrategy, Component, Input, ViewChild, ViewChildren, } from '@angular/core';
import { EMPTY_QUERY } from '@taiga-ui/cdk/constants';
import { tuiInjectElement } from '@taiga-ui/cdk/utils/dom';
import { tuiHeaderOptionsProvider } from '@taiga-ui/layout/components/header';
import * as i0 from "@angular/core";
const OPTIONS = {
    duration: 20,
    easing: 'ease-in',
    fill: 'forwards',
};
class TuiBottomSheet {
    constructor() {
        this.elements = EMPTY_QUERY;
        this.el = tuiInjectElement();
        this.stops = ['1.5rem'];
    }
    onScroll() {
        const { clientHeight, scrollTop, scrollHeight } = this.el;
        const top = this.elements.get(0)?.nativeElement.clientHeight || 0;
        const max = this.content?.nativeElement.clientHeight || Infinity;
        const height = Math.min(clientHeight, max);
        const scrolled = Math.min(scrollTop, height - top);
        const transform = `translate3d(0, ${-1 * scrolled}px, 0)`;
        this.el.style.setProperty('--t-height', `${scrollHeight}px`);
        this.el.animate([{ transform }], OPTIONS);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiBottomSheet, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: TuiBottomSheet, isStandalone: true, selector: "tui-bottom-sheet", inputs: { stops: "stops" }, host: { listeners: { "scroll.zoneless": "onScroll()", "resize": "onScroll()" }, properties: { "style.--t-start": "stops[0]", "style.scroll-snap-type": "stops.length > 1 ? \"y mandatory\" : null" } }, providers: [tuiHeaderOptionsProvider({ size: 'h5' })], viewQueries: [{ propertyName: "content", first: true, predicate: ["content"], descendants: true }, { propertyName: "elements", predicate: ["stops"], descendants: true }], ngImport: i0, template: "<div\n    *ngFor=\"let stop of stops\"\n    #stops\n    class=\"t-stop\"\n    [style.top]=\"stop\"\n></div>\n<div\n    #content\n    class=\"t-content\"\n    (resize)=\"onScroll()\"\n>\n    <ng-content />\n</div>\n<div class=\"t-bottom\"></div>\n", styles: [":host{scrollbar-width:none;-ms-overflow-style:none;position:absolute;top:100%;left:0;right:0;display:block;block-size:calc(100% - 1rem);max-inline-size:40rem;margin:calc(-1 * var(--t-start)) auto 0;background:var(--tui-background-elevation-1);border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l);overflow:auto;box-shadow:0 1rem var(--tui-background-elevation-1),var(--tui-shadow-medium)}:host::-webkit-scrollbar,:host::-webkit-scrollbar-thumb{display:none}:host:before{content:\"\";position:sticky;top:.625rem;left:50%;z-index:1;display:block;inline-size:2rem;block-size:.25rem;margin-block-end:-.25rem;transform:translate(-50%);background:var(--tui-background-elevation-1);box-shadow:0 0 0 20rem var(--tui-background-elevation-1),inset 0 0 0 1rem var(--tui-border-normal);border-radius:1rem;clip-path:polygon(-100vw -1rem,100vw -1rem,100vw calc(100% + .625rem),-100vw calc(100% + .625rem))}:host:after{content:\"\";position:absolute;top:calc(100% - var(--t-start));inline-size:1rem;block-size:calc(var(--t-height) - 100% + var(--t-start));scroll-snap-align:start;scroll-snap-stop:always}.t-content{position:sticky;top:0;padding:2.25rem 1rem 1.5rem}.t-bottom{block-size:calc(100% - var(--t-start))}.t-stop{position:absolute;block-size:var(--t-start);inline-size:1rem;pointer-events:none;transform:translateY(-100%);scroll-snap-align:start;scroll-snap-stop:always}.t-stop:last-child{scroll-snap-align:none}\n"], dependencies: [{ kind: "directive", type: NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
export { TuiBottomSheet };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiBottomSheet, decorators: [{
            type: Component,
            args: [{ standalone: true, selector: 'tui-bottom-sheet', imports: [NgForOf], changeDetection: ChangeDetectionStrategy.OnPush, providers: [tuiHeaderOptionsProvider({ size: 'h5' })], host: {
                        '[style.--t-start]': 'stops[0]',
                        '[style.scroll-snap-type]': 'stops.length > 1 ? "y mandatory" : null',
                        '(scroll.zoneless)': 'onScroll()',
                        '(resize)': 'onScroll()',
                    }, template: "<div\n    *ngFor=\"let stop of stops\"\n    #stops\n    class=\"t-stop\"\n    [style.top]=\"stop\"\n></div>\n<div\n    #content\n    class=\"t-content\"\n    (resize)=\"onScroll()\"\n>\n    <ng-content />\n</div>\n<div class=\"t-bottom\"></div>\n", styles: [":host{scrollbar-width:none;-ms-overflow-style:none;position:absolute;top:100%;left:0;right:0;display:block;block-size:calc(100% - 1rem);max-inline-size:40rem;margin:calc(-1 * var(--t-start)) auto 0;background:var(--tui-background-elevation-1);border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l);overflow:auto;box-shadow:0 1rem var(--tui-background-elevation-1),var(--tui-shadow-medium)}:host::-webkit-scrollbar,:host::-webkit-scrollbar-thumb{display:none}:host:before{content:\"\";position:sticky;top:.625rem;left:50%;z-index:1;display:block;inline-size:2rem;block-size:.25rem;margin-block-end:-.25rem;transform:translate(-50%);background:var(--tui-background-elevation-1);box-shadow:0 0 0 20rem var(--tui-background-elevation-1),inset 0 0 0 1rem var(--tui-border-normal);border-radius:1rem;clip-path:polygon(-100vw -1rem,100vw -1rem,100vw calc(100% + .625rem),-100vw calc(100% + .625rem))}:host:after{content:\"\";position:absolute;top:calc(100% - var(--t-start));inline-size:1rem;block-size:calc(var(--t-height) - 100% + var(--t-start));scroll-snap-align:start;scroll-snap-stop:always}.t-content{position:sticky;top:0;padding:2.25rem 1rem 1.5rem}.t-bottom{block-size:calc(100% - var(--t-start))}.t-stop{position:absolute;block-size:var(--t-start);inline-size:1rem;pointer-events:none;transform:translateY(-100%);scroll-snap-align:start;scroll-snap-stop:always}.t-stop:last-child{scroll-snap-align:none}\n"] }]
        }], propDecorators: { elements: [{
                type: ViewChildren,
                args: ['stops']
            }], content: [{
                type: ViewChild,
                args: ['content']
            }], stops: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm90dG9tLXNoZWV0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FkZG9uLW1vYmlsZS9jb21wb25lbnRzL2JvdHRvbS1zaGVldC9ib3R0b20tc2hlZXQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYWRkb24tbW9iaWxlL2NvbXBvbmVudHMvYm90dG9tLXNoZWV0L2JvdHRvbS1zaGVldC50ZW1wbGF0ZS5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUV4QyxPQUFPLEVBQ0gsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxLQUFLLEVBQ0wsU0FBUyxFQUNULFlBQVksR0FDZixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFDcEQsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFDekQsT0FBTyxFQUFDLHdCQUF3QixFQUFDLE1BQU0sb0NBQW9DLENBQUM7O0FBRTVFLE1BQU0sT0FBTyxHQUFHO0lBQ1osUUFBUSxFQUFFLEVBQUU7SUFDWixNQUFNLEVBQUUsU0FBUztJQUNqQixJQUFJLEVBQUUsVUFBVTtDQUNWLENBQUM7QUFFWCxNQWVhLGNBQWM7SUFmM0I7UUFpQnFCLGFBQVEsR0FBdUMsV0FBVyxDQUFDO1FBSzNELE9BQUUsR0FBRyxnQkFBZ0IsRUFBRSxDQUFDO1FBR2xDLFVBQUssR0FBc0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztLQWFoRDtJQVhhLFFBQVE7UUFDZCxNQUFNLEVBQUMsWUFBWSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO1FBQ3hELE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLGFBQWEsQ0FBQyxZQUFZLElBQUksQ0FBQyxDQUFDO1FBQ2xFLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsYUFBYSxDQUFDLFlBQVksSUFBSSxRQUFRLENBQUM7UUFDakUsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDM0MsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQ25ELE1BQU0sU0FBUyxHQUFHLGtCQUFrQixDQUFDLENBQUMsR0FBRyxRQUFRLFFBQVEsQ0FBQztRQUUxRCxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsWUFBWSxFQUFFLEdBQUcsWUFBWSxJQUFJLENBQUMsQ0FBQztRQUM3RCxJQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUMsU0FBUyxFQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUM1QyxDQUFDOytHQXRCUSxjQUFjO21HQUFkLGNBQWMsbVNBUlosQ0FBQyx3QkFBd0IsQ0FBQyxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDLHFNQzFCdkQsd1BBY0EsMjlDRFFjLE9BQU87O1NBWVIsY0FBYzs0RkFBZCxjQUFjO2tCQWYxQixTQUFTO2lDQUNNLElBQUksWUFDTixrQkFBa0IsV0FDbkIsQ0FBQyxPQUFPLENBQUMsbUJBR0QsdUJBQXVCLENBQUMsTUFBTSxhQUNwQyxDQUFDLHdCQUF3QixDQUFDLEVBQUMsSUFBSSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUMsUUFDN0M7d0JBQ0YsbUJBQW1CLEVBQUUsVUFBVTt3QkFDL0IsMEJBQTBCLEVBQUUseUNBQXlDO3dCQUNyRSxtQkFBbUIsRUFBRSxZQUFZO3dCQUNqQyxVQUFVLEVBQUUsWUFBWTtxQkFDM0I7OEJBSWdCLFFBQVE7c0JBRHhCLFlBQVk7dUJBQUMsT0FBTztnQkFJSixPQUFPO3NCQUR2QixTQUFTO3VCQUFDLFNBQVM7Z0JBTWIsS0FBSztzQkFEWCxLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtOZ0Zvck9mfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHR5cGUge0VsZW1lbnRSZWYsIFF1ZXJ5TGlzdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICAgIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICAgIENvbXBvbmVudCxcbiAgICBJbnB1dCxcbiAgICBWaWV3Q2hpbGQsXG4gICAgVmlld0NoaWxkcmVuLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7RU1QVFlfUVVFUll9IGZyb20gJ0B0YWlnYS11aS9jZGsvY29uc3RhbnRzJztcbmltcG9ydCB7dHVpSW5qZWN0RWxlbWVudH0gZnJvbSAnQHRhaWdhLXVpL2Nkay91dGlscy9kb20nO1xuaW1wb3J0IHt0dWlIZWFkZXJPcHRpb25zUHJvdmlkZXJ9IGZyb20gJ0B0YWlnYS11aS9sYXlvdXQvY29tcG9uZW50cy9oZWFkZXInO1xuXG5jb25zdCBPUFRJT05TID0ge1xuICAgIGR1cmF0aW9uOiAyMCxcbiAgICBlYXNpbmc6ICdlYXNlLWluJyxcbiAgICBmaWxsOiAnZm9yd2FyZHMnLFxufSBhcyBjb25zdDtcblxuQENvbXBvbmVudCh7XG4gICAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgICBzZWxlY3RvcjogJ3R1aS1ib3R0b20tc2hlZXQnLFxuICAgIGltcG9ydHM6IFtOZ0Zvck9mXSxcbiAgICB0ZW1wbGF0ZVVybDogJy4vYm90dG9tLXNoZWV0LnRlbXBsYXRlLmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL2JvdHRvbS1zaGVldC5zdHlsZS5sZXNzJ10sXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgcHJvdmlkZXJzOiBbdHVpSGVhZGVyT3B0aW9uc1Byb3ZpZGVyKHtzaXplOiAnaDUnfSldLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgJ1tzdHlsZS4tLXQtc3RhcnRdJzogJ3N0b3BzWzBdJyxcbiAgICAgICAgJ1tzdHlsZS5zY3JvbGwtc25hcC10eXBlXSc6ICdzdG9wcy5sZW5ndGggPiAxID8gXCJ5IG1hbmRhdG9yeVwiIDogbnVsbCcsXG4gICAgICAgICcoc2Nyb2xsLnpvbmVsZXNzKSc6ICdvblNjcm9sbCgpJyxcbiAgICAgICAgJyhyZXNpemUpJzogJ29uU2Nyb2xsKCknLFxuICAgIH0sXG59KVxuZXhwb3J0IGNsYXNzIFR1aUJvdHRvbVNoZWV0IHtcbiAgICBAVmlld0NoaWxkcmVuKCdzdG9wcycpXG4gICAgcHJpdmF0ZSByZWFkb25seSBlbGVtZW50czogUXVlcnlMaXN0PEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+PiA9IEVNUFRZX1FVRVJZO1xuXG4gICAgQFZpZXdDaGlsZCgnY29udGVudCcpXG4gICAgcHJpdmF0ZSByZWFkb25seSBjb250ZW50PzogRWxlbWVudFJlZjxIVE1MRWxlbWVudD47XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IGVsID0gdHVpSW5qZWN0RWxlbWVudCgpO1xuXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgc3RvcHM6IHJlYWRvbmx5IHN0cmluZ1tdID0gWycxLjVyZW0nXTtcblxuICAgIHByb3RlY3RlZCBvblNjcm9sbCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qge2NsaWVudEhlaWdodCwgc2Nyb2xsVG9wLCBzY3JvbGxIZWlnaHR9ID0gdGhpcy5lbDtcbiAgICAgICAgY29uc3QgdG9wID0gdGhpcy5lbGVtZW50cy5nZXQoMCk/Lm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IDA7XG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMuY29udGVudD8ubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQgfHwgSW5maW5pdHk7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWluKGNsaWVudEhlaWdodCwgbWF4KTtcbiAgICAgICAgY29uc3Qgc2Nyb2xsZWQgPSBNYXRoLm1pbihzY3JvbGxUb3AsIGhlaWdodCAtIHRvcCk7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwLCAkey0xICogc2Nyb2xsZWR9cHgsIDApYDtcblxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLXQtaGVpZ2h0JywgYCR7c2Nyb2xsSGVpZ2h0fXB4YCk7XG4gICAgICAgIHRoaXMuZWwuYW5pbWF0ZShbe3RyYW5zZm9ybX1dLCBPUFRJT05TKTtcbiAgICB9XG59XG4iLCI8ZGl2XG4gICAgKm5nRm9yPVwibGV0IHN0b3Agb2Ygc3RvcHNcIlxuICAgICNzdG9wc1xuICAgIGNsYXNzPVwidC1zdG9wXCJcbiAgICBbc3R5bGUudG9wXT1cInN0b3BcIlxuPjwvZGl2PlxuPGRpdlxuICAgICNjb250ZW50XG4gICAgY2xhc3M9XCJ0LWNvbnRlbnRcIlxuICAgIChyZXNpemUpPVwib25TY3JvbGwoKVwiXG4+XG4gICAgPG5nLWNvbnRlbnQgLz5cbjwvZGl2PlxuPGRpdiBjbGFzcz1cInQtYm90dG9tXCI+PC9kaXY+XG4iXX0=