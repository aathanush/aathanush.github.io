{"version":3,"file":"taiga-ui-kit-directives-unfinished-validator.mjs","sources":["../../../projects/kit/directives/unfinished-validator/unfinished.validator.ts","../../../projects/kit/directives/unfinished-validator/unfinished-validator.directive.ts","../../../projects/kit/directives/unfinished-validator/taiga-ui-kit-directives-unfinished-validator.ts"],"sourcesContent":["import type {AbstractControl, ValidatorFn} from '@angular/forms';\nimport {TuiValidationError} from '@taiga-ui/cdk/classes';\nimport type {PolymorpheusContent} from '@taiga-ui/polymorpheus';\n\nexport function tuiCreateUnfinishedValidator(\n    element: HTMLInputElement,\n    message: PolymorpheusContent,\n): ValidatorFn {\n    return ({\n        value,\n    }: AbstractControl): {tuiUnfinished: TuiValidationError | string} | null =>\n        value === null && element.value !== ''\n            ? {tuiUnfinished: new TuiValidationError(message)}\n            : null;\n}\n","import {Directive, inject, Input, signal} from '@angular/core';\nimport {toSignal} from '@angular/core/rxjs-interop';\nimport type {Validator} from '@angular/forms';\nimport {NG_VALIDATORS} from '@angular/forms';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiProvide} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {TUI_DEFAULT_ERROR_MESSAGE} from '@taiga-ui/core/tokens';\nimport {TUI_VALIDATION_ERRORS} from '@taiga-ui/kit/tokens';\nimport {isObservable} from 'rxjs';\n\nimport {tuiCreateUnfinishedValidator} from './unfinished.validator';\n\n@Directive({\n    standalone: true,\n    selector: 'input[tuiUnfinishedValidator]',\n    providers: [tuiProvide(NG_VALIDATORS, TuiUnfinishedValidator, true)],\n})\nexport class TuiUnfinishedValidator implements Validator {\n    private readonly default = toSignal(inject(TUI_DEFAULT_ERROR_MESSAGE));\n    private readonly error = inject(TUI_VALIDATION_ERRORS)['tuiUnfinished'];\n    private readonly fallback = this.error ? signal(this.error) : this.default;\n    private readonly message = isObservable(this.error)\n        ? toSignal(this.error)\n        : this.fallback;\n\n    @Input()\n    public tuiUnfinishedValidator = '';\n\n    public readonly validate = tuiCreateUnfinishedValidator(\n        tuiInjectElement<HTMLInputElement>(),\n        () => this.tuiUnfinishedValidator || this.message(),\n    );\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;;;;;AAIgB,SAAA,4BAA4B,CACxC,OAAyB,EACzB,OAA4B,EAAA;AAE5B,IAAA,OAAO,CAAC,EACJ,KAAK,GACS,KACd,KAAK,KAAK,IAAI,IAAI,OAAO,CAAC,KAAK,KAAK,EAAE;UAChC,EAAC,aAAa,EAAE,IAAI,kBAAkB,CAAC,OAAO,CAAC,EAAC;UAChD,IAAI,CAAC;AACnB;;ACFA,MAKa,sBAAsB,CAAA;AALnC,IAAA,WAAA,GAAA;QAMqB,IAAO,CAAA,OAAA,GAAG,QAAQ,CAAC,MAAM,CAAC,yBAAyB,CAAC,CAAC,CAAC;QACtD,IAAK,CAAA,KAAA,GAAG,MAAM,CAAC,qBAAqB,CAAC,CAAC,eAAe,CAAC,CAAC;AACvD,QAAA,IAAA,CAAA,QAAQ,GAAG,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AAC1D,QAAA,IAAA,CAAA,OAAO,GAAG,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC;AAC/C,cAAE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;AACtB,cAAE,IAAI,CAAC,QAAQ,CAAC;QAGb,IAAsB,CAAA,sBAAA,GAAG,EAAE,CAAC;AAEnB,QAAA,IAAA,CAAA,QAAQ,GAAG,4BAA4B,CACnD,gBAAgB,EAAoB,EACpC,MAAM,IAAI,CAAC,sBAAsB,IAAI,IAAI,CAAC,OAAO,EAAE,CACtD,CAAC;AACL,KAAA;+GAfY,sBAAsB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAAtB,sBAAsB,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,+BAAA,EAAA,MAAA,EAAA,EAAA,sBAAA,EAAA,wBAAA,EAAA,EAAA,SAAA,EAFpB,CAAC,UAAU,CAAC,aAAa,EAAE,sBAAsB,EAAE,IAAI,CAAC,CAAC,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAE3D,sBAAsB,EAAA,UAAA,EAAA,CAAA;kBALlC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,UAAU,EAAE,IAAI;AAChB,oBAAA,QAAQ,EAAE,+BAA+B;oBACzC,SAAS,EAAE,CAAC,UAAU,CAAC,aAAa,EAA0B,sBAAA,EAAA,IAAI,CAAC,CAAC;AACvE,iBAAA,CAAA;8BAUU,sBAAsB,EAAA,CAAA;sBAD5B,KAAK;;;ACzBV;;AAEG;;;;"}