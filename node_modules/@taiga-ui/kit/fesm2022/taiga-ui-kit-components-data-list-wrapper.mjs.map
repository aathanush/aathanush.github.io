{"version":3,"file":"taiga-ui-kit-components-data-list-wrapper.mjs","sources":["../../../projects/kit/components/data-list-wrapper/data-list-wrapper.component.ts","../../../projects/kit/components/data-list-wrapper/data-list-wrapper.template.html","../../../projects/kit/components/data-list-wrapper/data-list-group-wrapper.component.ts","../../../projects/kit/components/data-list-wrapper/data-list-group-wrapper.template.html","../../../projects/kit/components/data-list-wrapper/data-list-wrapper.module.ts","../../../projects/kit/components/data-list-wrapper/taiga-ui-kit-components-data-list-wrapper.ts"],"sourcesContent":["import {NgForOf, NgIf} from '@angular/common';\nimport type {ElementRef, QueryList} from '@angular/core';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    EventEmitter,\n    forwardRef,\n    inject,\n    Input,\n    isSignal,\n    Output,\n    ViewChildren,\n} from '@angular/core';\nimport {EMPTY_QUERY} from '@taiga-ui/cdk/constants';\nimport {TuiElement} from '@taiga-ui/cdk/directives/element';\nimport type {TuiBooleanHandler} from '@taiga-ui/cdk/types';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiIsNativeFocused} from '@taiga-ui/cdk/utils/focus';\nimport {tuiIsPresent} from '@taiga-ui/cdk/utils/miscellaneous';\nimport type {TuiDataListAccessor} from '@taiga-ui/core/components/data-list';\nimport {\n    tuiAsDataListAccessor,\n    TuiDataList,\n    tuiInjectDataListSize,\n    TuiOption,\n    TuiOptionWithValue,\n} from '@taiga-ui/core/components/data-list';\nimport {TuiLoader} from '@taiga-ui/core/components/loader';\nimport type {TuiItemsHandlers} from '@taiga-ui/core/directives/items-handlers';\nimport {TUI_ITEMS_HANDLERS} from '@taiga-ui/core/directives/items-handlers';\nimport type {TuiValueContentContext} from '@taiga-ui/core/types';\nimport type {TuiItemsHandlers as TuiItemsHandlersLegacy} from '@taiga-ui/kit/tokens';\nimport {TUI_ITEMS_HANDLERS as TUI_ITEMS_HANDLERS_LEGACY} from '@taiga-ui/kit/tokens';\nimport type {PolymorpheusContent} from '@taiga-ui/polymorpheus';\nimport {PolymorpheusOutlet} from '@taiga-ui/polymorpheus';\n\n@Component({\n    standalone: true,\n    selector:\n        'tui-data-list-wrapper:not([labels]), tui-data-list-wrapper:not([labels])[new]', // TODO(v5): remove [new]\n    imports: [NgForOf, NgIf, PolymorpheusOutlet, TuiDataList, TuiElement, TuiLoader],\n    templateUrl: './data-list-wrapper.template.html',\n    styleUrls: ['./data-list-wrapper.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [tuiAsDataListAccessor(TuiDataListWrapperComponent)],\n})\nexport class TuiDataListWrapperComponent<T, K = T> implements TuiDataListAccessor<T> {\n    private readonly itemsHandlers: TuiItemsHandlers<T> = inject(TUI_ITEMS_HANDLERS);\n    // TODO(v5): delete\n    private readonly itemsHandlersLegacy: TuiItemsHandlersLegacy<T> = inject(\n        TUI_ITEMS_HANDLERS_LEGACY,\n    );\n\n    @ViewChildren(forwardRef(() => TuiOption))\n    protected readonly legacyOptionsQuery: QueryList<TuiOption<T>> = EMPTY_QUERY;\n\n    @ViewChildren(forwardRef(() => TuiOptionWithValue))\n    protected readonly optionsQuery: QueryList<TuiOptionWithValue<T>> = EMPTY_QUERY;\n\n    protected readonly newOptionMode = tuiInjectElement().hasAttribute('new');\n\n    @Input()\n    public items: readonly K[] | null = [];\n\n    @Input()\n    public disabledItemHandler: TuiBooleanHandler<T> = this.newOptionMode\n        ? this.itemsHandlers?.disabledItemHandler()\n        : this.itemsHandlersLegacy.disabledItemHandler;\n\n    @Input()\n    public emptyContent: PolymorpheusContent;\n\n    @Input()\n    public size = tuiInjectDataListSize();\n\n    @Output()\n    public readonly itemClick = new EventEmitter<T>();\n\n    @Input()\n    public itemContent: PolymorpheusContent<TuiValueContentContext<T>> = ({$implicit}) =>\n        this.newOptionMode\n            ? this.itemsHandlers.stringify()($implicit)\n            : this.itemsHandlersLegacy.stringify($implicit);\n\n    public getContext(\n        $implicit: T,\n        {nativeElement}: ElementRef<HTMLElement>,\n    ): TuiValueContentContext<T> {\n        return {$implicit, active: tuiIsNativeFocused(nativeElement)};\n    }\n\n    public getOptions(includeDisabled = false): readonly T[] {\n        return [\n            ...this.legacyOptionsQuery, // TODO(v5): delete\n            ...this.optionsQuery,\n        ]\n            .filter(({disabled}) => includeDisabled || !disabled)\n            .map(({value}) => (isSignal(value) ? value() : value))\n            .filter(tuiIsPresent);\n    }\n\n    protected $cast(items: readonly K[]): readonly T[] {\n        return items as unknown as readonly T[];\n    }\n}\n","<tui-data-list\n    *ngIf=\"items; else loading\"\n    [emptyContent]=\"emptyContent\"\n    [size]=\"size\"\n>\n    <ng-container *ngIf=\"newOptionMode; else legacyOptionFallback\">\n        <button\n            *ngFor=\"let item of $cast(items)\"\n            #elementRef=\"elementRef\"\n            new\n            tuiElement\n            tuiOption\n            type=\"button\"\n            [disabled]=\"disabledItemHandler(item)\"\n            [value]=\"item\"\n            (click)=\"itemClick.emit(item)\"\n        >\n            <ng-container *polymorpheusOutlet=\"itemContent as text; context: getContext(item, elementRef)\">\n                {{ text }}\n            </ng-container>\n        </button>\n    </ng-container>\n\n    <!-- TODO(v5): delete fallback -->\n    <ng-template #legacyOptionFallback>\n        <button\n            *ngFor=\"let item of $cast(items)\"\n            #elementRef=\"elementRef\"\n            automation-id=\"tui-data-list-wrapper__option\"\n            tuiElement\n            tuiOption\n            type=\"button\"\n            [disabled]=\"disabledItemHandler(item)\"\n            [value]=\"item\"\n            (click)=\"itemClick.emit(item)\"\n        >\n            <span class=\"t-content\">\n                <ng-container *polymorpheusOutlet=\"itemContent as text; context: getContext(item, elementRef)\">\n                    {{ text }}\n                </ng-container>\n            </span>\n        </button>\n    </ng-template>\n</tui-data-list>\n<ng-template #loading>\n    <tui-loader\n        automation-id=\"tui-data-list-wrapper__loader\"\n        class=\"t-loader\"\n    />\n</ng-template>\n","import {NgForOf, NgIf} from '@angular/common';\nimport {ChangeDetectionStrategy, Component, Input} from '@angular/core';\nimport {TuiElement} from '@taiga-ui/cdk/directives/element';\nimport {tuiAsDataListAccessor, TuiDataList} from '@taiga-ui/core/components/data-list';\nimport {TuiLoader} from '@taiga-ui/core/components/loader';\nimport {PolymorpheusOutlet} from '@taiga-ui/polymorpheus';\n\nimport {TuiDataListWrapperComponent} from './data-list-wrapper.component';\n\n@Component({\n    standalone: true,\n    selector: 'tui-data-list-wrapper[labels]',\n    imports: [NgForOf, NgIf, PolymorpheusOutlet, TuiDataList, TuiElement, TuiLoader],\n    templateUrl: './data-list-group-wrapper.template.html',\n    styleUrls: ['./data-list-wrapper.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [tuiAsDataListAccessor(TuiDataListGroupWrapperComponent)],\n})\nexport class TuiDataListGroupWrapperComponent<T> extends TuiDataListWrapperComponent<\n    T,\n    readonly T[]\n> {\n    @Input()\n    public labels: readonly string[] = [];\n}\n","<tui-data-list\n    *ngIf=\"items; else loading\"\n    [emptyContent]=\"emptyContent\"\n    [size]=\"size\"\n>\n    <tui-opt-group\n        *ngFor=\"let group of items; let index = index\"\n        [label]=\"labels[index]\"\n    >\n        <ng-container *ngIf=\"newOptionMode; else legacyOptionFallback\">\n            <button\n                *ngFor=\"let item of group\"\n                #elementRef=\"elementRef\"\n                new\n                tuiElement\n                tuiOption\n                type=\"button\"\n                [disabled]=\"disabledItemHandler(item)\"\n                [value]=\"item\"\n                (click)=\"itemClick.emit(item)\"\n            >\n                <ng-container *polymorpheusOutlet=\"itemContent as text; context: getContext(item, elementRef)\">\n                    {{ text }}\n                </ng-container>\n            </button>\n        </ng-container>\n\n        <!-- TODO(v5): delete fallback -->\n        <ng-template #legacyOptionFallback>\n            <button\n                *ngFor=\"let item of group\"\n                #elementRef=\"elementRef\"\n                automation-id=\"tui-data-list-wrapper__option\"\n                tuiElement\n                tuiOption\n                type=\"button\"\n                [disabled]=\"disabledItemHandler(item)\"\n                [value]=\"item\"\n                (click)=\"itemClick.emit(item)\"\n            >\n                <ng-container *polymorpheusOutlet=\"itemContent as text; context: getContext(item, elementRef)\">\n                    {{ text }}\n                </ng-container>\n            </button>\n        </ng-template>\n    </tui-opt-group>\n</tui-data-list>\n<ng-template #loading>\n    <tui-loader class=\"t-loader\" />\n</ng-template>\n","import {TuiDataListDirective} from '@taiga-ui/core/components/data-list';\n\nimport {TuiDataListGroupWrapperComponent} from './data-list-group-wrapper.component';\nimport {TuiDataListWrapperComponent} from './data-list-wrapper.component';\n\nexport const TuiDataListWrapper = [\n    TuiDataListWrapperComponent,\n    TuiDataListGroupWrapperComponent,\n    TuiDataListDirective,\n] as const;\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["TUI_ITEMS_HANDLERS_LEGACY"],"mappings":"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"}