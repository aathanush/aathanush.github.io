{"version":3,"file":"taiga-ui-core-components-data-list.mjs","sources":["../../../projects/core/components/data-list/data-list.tokens.ts","../../../projects/core/components/data-list/option/option-content.ts","../../../projects/core/components/data-list/option/option.directive.ts","../../../projects/core/components/data-list/option/option-legacy.component.ts","../../../projects/core/components/data-list/data-list.component.ts","../../../projects/core/components/data-list/data-list.template.html","../../../projects/core/components/data-list/data-list.directive.ts","../../../projects/core/components/data-list/opt-group.directive.ts","../../../projects/core/components/data-list/data-list.ts","../../../projects/core/components/data-list/taiga-ui-core-components-data-list.ts"],"sourcesContent":["import type {Provider, Type} from '@angular/core';\nimport type {TuiIdentityMatcher, TuiStringHandler} from '@taiga-ui/cdk/types';\nimport {tuiCreateToken, tuiProvide} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {tuiAsAuxiliary} from '@taiga-ui/core/tokens';\nimport type {TuiSizeL, TuiSizeS} from '@taiga-ui/core/types';\n\nexport interface TuiDataListAccessor<T = unknown> {\n    getOptions(includeDisabled?: boolean): readonly T[];\n}\n\n// TODO: Consider refactoring checkOption, it is only needed in ComboBox\nexport interface TuiDataListHost<T> {\n    checkOption?(option: T): void;\n    handleOption?(option: T): void;\n    /**\n     * @deprecated Use `inject(TuiItemsHandlersDirective<T>).identityMatcher` instead\n     */\n    readonly identityMatcher?: TuiIdentityMatcher<T>;\n    /**\n     * @deprecated Use `inject(TuiItemsHandlersDirective<T>).stringify` instead\n     */\n    readonly stringify?: TuiStringHandler<T>;\n    readonly size?: TuiSizeL | TuiSizeS;\n}\n\n/**\n * Accessor for data-list options\n */\nexport const TUI_DATA_LIST_ACCESSOR = tuiCreateToken<TuiDataListAccessor>();\n\nexport function tuiAsDataListAccessor(accessor: Type<TuiDataListAccessor>): Provider {\n    return [tuiProvide(TUI_DATA_LIST_ACCESSOR, accessor), tuiAsAuxiliary(accessor)];\n}\n\n/**\n * DataList controller\n */\nexport const TUI_DATA_LIST_HOST = tuiCreateToken<TuiDataListHost<unknown>>();\n\nexport function tuiAsDataListHost<T>(host: Type<TuiDataListHost<T>>): Provider {\n    return tuiProvide(TUI_DATA_LIST_HOST, host);\n}\n","import type {Provider, TemplateRef, Type} from '@angular/core';\nimport {ContentChild, Directive, inject} from '@angular/core';\nimport type {TuiContext} from '@taiga-ui/cdk/types';\nimport {tuiCreateToken} from '@taiga-ui/cdk/utils/miscellaneous';\nimport type {PolymorpheusContent} from '@taiga-ui/polymorpheus';\n\n/**\n * Content for tuiOption component\n */\nexport const TUI_OPTION_CONTENT = tuiCreateToken<\n    | PolymorpheusContent<TuiContext<TemplateRef<Record<string, unknown>>>> // TODO(v5): delete\n    | Type<any>\n>();\n\nexport function tuiAsOptionContent(\n    useValue:\n        | PolymorpheusContent<TuiContext<TemplateRef<Record<string, unknown>>>> // TODO(v5): delete\n        | Type<any>,\n): Provider {\n    return {\n        provide: TUI_OPTION_CONTENT,\n        useValue,\n    };\n}\n\n@Directive({\n    standalone: true,\n})\nexport class TuiWithOptionContent {\n    @ContentChild(TUI_OPTION_CONTENT, {descendants: true})\n    protected readonly localContent: Type<any> | null = null;\n\n    protected readonly globalContent = inject<Type<any>>(TUI_OPTION_CONTENT, {\n        optional: true,\n    });\n\n    public get content(): Type<any> | null {\n        return this.globalContent ?? this.localContent;\n    }\n}\n","import type {OnDestroy, Type} from '@angular/core';\nimport {\n    createComponent,\n    Directive,\n    EnvironmentInjector,\n    forwardRef,\n    inject,\n    INJECTOR,\n    Input,\n    signal,\n    ViewContainerRef,\n} from '@angular/core';\nimport {TUI_IS_MOBILE} from '@taiga-ui/cdk/tokens';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiIsNativeFocused} from '@taiga-ui/cdk/utils/focus';\nimport {TuiDropdownDirective} from '@taiga-ui/core/directives/dropdown';\nimport {TuiWithIcons} from '@taiga-ui/core/directives/icons';\n\nimport {TuiDataListComponent} from '../data-list.component';\nimport {TUI_OPTION_CONTENT} from './option-content';\n\n// TODO(v5): rename `TuiOptionNew` => `TuiOption` & remove [new] from selector\n// TODO: Consider all use cases for aria roles\n@Directive({\n    standalone: true,\n    selector: 'button[tuiOption][new], a[tuiOption][new], label[tuiOption][new]',\n    hostDirectives: [TuiWithIcons],\n    host: {\n        type: 'button',\n        role: 'option',\n        '[attr.disabled]': 'disabled || null',\n        '[class._with-dropdown]': 'dropdown?.()',\n        '(mousemove.zoneless)': 'onMouseMove()',\n    },\n})\nexport class TuiOptionNew<T = unknown> implements OnDestroy {\n    private readonly vcr = inject(ViewContainerRef);\n    private readonly isMobile = inject(TUI_IS_MOBILE);\n    private readonly el = tuiInjectElement();\n    private readonly dataList = inject<TuiDataListComponent<T>>(\n        forwardRef(() => TuiDataListComponent),\n        {optional: true},\n    );\n\n    private readonly content = inject<Type<any> | null>(TUI_OPTION_CONTENT, {\n        optional: true,\n    });\n\n    private readonly ref =\n        this.content &&\n        createComponent(this.content, {\n            environmentInjector: inject(EnvironmentInjector),\n            elementInjector: inject(INJECTOR),\n            hostElement: tuiInjectElement(),\n        });\n\n    protected readonly dropdown = inject(TuiDropdownDirective, {\n        self: true,\n        optional: true,\n    })?.ref;\n\n    @Input()\n    public disabled = false;\n\n    constructor() {\n        if (this.ref) {\n            this.vcr.insert(this.ref.hostView);\n            this.ref.changeDetectorRef.detectChanges();\n        }\n    }\n\n    // Preventing focus loss upon focused option removal\n    public ngOnDestroy(): void {\n        this.dataList?.handleFocusLossIfNecessary(this.el);\n    }\n\n    protected onMouseMove(): void {\n        if (\n            !this.isMobile &&\n            !tuiIsNativeFocused(this.el) &&\n            this.dataList &&\n            this.el.closest('[tuiDataListDropdownManager]')\n        ) {\n            this.el.focus({preventScroll: true});\n        }\n    }\n}\n\n// TODO(v5): remove [new] from selector\n@Directive({\n    standalone: true,\n    selector:\n        'button[tuiOption][value][new], a[tuiOption][value][new], label[tuiOption][value][new]',\n})\nexport class TuiOptionWithValue<T = unknown> {\n    @Input()\n    public disabled = false;\n\n    public readonly value = signal<T | undefined>(undefined);\n\n    // TODO(v5): use `input.required<T>()` to remove `undefined` from `this.value()`\n    @Input({alias: 'value', required: true})\n    public set valueSetter(x: T) {\n        this.value.set(x);\n    }\n}\n","import type {OnDestroy, TemplateRef} from '@angular/core';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    forwardRef,\n    inject,\n    Input,\n} from '@angular/core';\nimport {TUI_IS_MOBILE} from '@taiga-ui/cdk/tokens';\nimport type {TuiContext} from '@taiga-ui/cdk/types';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiIsNativeFocused} from '@taiga-ui/cdk/utils/focus';\nimport {TuiDropdownDirective} from '@taiga-ui/core/directives/dropdown';\nimport {TuiWithIcons} from '@taiga-ui/core/directives/icons';\nimport type {PolymorpheusContent} from '@taiga-ui/polymorpheus';\nimport {PolymorpheusOutlet} from '@taiga-ui/polymorpheus';\n\nimport {TuiDataListComponent} from '../data-list.component';\nimport type {TuiDataListHost} from '../data-list.tokens';\nimport {TUI_DATA_LIST_HOST} from '../data-list.tokens';\nimport {TUI_OPTION_CONTENT} from './option-content';\n\n/**\n * TODO(v5): delete\n * @deprecated use `<button tuiOption new />` / `<a tuiOption new /> / `<label tuiOption new /> instead\n */\n@Component({\n    standalone: true,\n    selector:\n        'button[tuiOption]:not([new]), a[tuiOption]:not([new]), label[tuiOption]:not([new])',\n    imports: [PolymorpheusOutlet],\n    template: `\n        <ng-container *polymorpheusOutlet=\"content || t as text; context: {$implicit: t}\">\n            {{ text }}\n        </ng-container>\n        <ng-template #t>\n            <ng-content />\n        </ng-template>\n    `,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    hostDirectives: [TuiWithIcons],\n    host: {\n        type: 'button',\n        role: 'option',\n        '[attr.disabled]': 'disabled || null',\n        '[class._with-dropdown]': 'dropdown?.()',\n        '(click)': 'onClick()',\n        '(mousemove.zoneless)': 'onMouseMove()',\n    },\n})\nexport class TuiOption<T = unknown> implements OnDestroy {\n    private readonly isMobile = inject(TUI_IS_MOBILE);\n    private readonly el = tuiInjectElement();\n    private readonly dataList = inject<TuiDataListComponent<T>>(\n        forwardRef(() => TuiDataListComponent),\n        {optional: true},\n    );\n\n    private readonly host = inject<TuiDataListHost<T>>(TUI_DATA_LIST_HOST, {\n        optional: true,\n    });\n\n    protected readonly content: PolymorpheusContent<\n        TuiContext<TemplateRef<Record<string, unknown>>>\n    > = inject(TUI_OPTION_CONTENT, {optional: true});\n\n    protected readonly dropdown = inject(TuiDropdownDirective, {\n        self: true,\n        optional: true,\n    })?.ref;\n\n    @Input()\n    public disabled = false;\n\n    @Input()\n    public value?: T;\n\n    // Preventing focus loss upon focused option removal\n    public ngOnDestroy(): void {\n        this.dataList?.handleFocusLossIfNecessary(this.el);\n    }\n\n    protected onClick(): void {\n        if (this.host?.handleOption && this.value !== undefined) {\n            this.host.handleOption(this.value);\n        }\n    }\n\n    protected onMouseMove(): void {\n        if (\n            !this.isMobile &&\n            !tuiIsNativeFocused(this.el) &&\n            this.dataList &&\n            this.el.closest('[tuiDataListDropdownManager]')\n        ) {\n            this.el.focus({preventScroll: true});\n        }\n    }\n}\n","import {NgIf} from '@angular/common';\nimport type {AfterContentChecked, QueryList} from '@angular/core';\nimport {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ContentChildren,\n    DestroyRef,\n    forwardRef,\n    inject,\n    Input,\n    isSignal,\n    NgZone,\n    signal,\n    ViewEncapsulation,\n} from '@angular/core';\nimport {toSignal} from '@angular/core/rxjs-interop';\nimport {EMPTY_QUERY} from '@taiga-ui/cdk/constants';\nimport {tuiTakeUntilDestroyed, tuiZonefree} from '@taiga-ui/cdk/observables';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiIsNativeFocusedIn, tuiMoveFocus} from '@taiga-ui/cdk/utils/focus';\nimport {tuiIsPresent} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {TUI_NOTHING_FOUND_MESSAGE} from '@taiga-ui/core/tokens';\nimport type {TuiSizeL, TuiSizeS} from '@taiga-ui/core/types';\nimport type {PolymorpheusContent} from '@taiga-ui/polymorpheus';\nimport {PolymorpheusOutlet} from '@taiga-ui/polymorpheus';\nimport {timer} from 'rxjs';\n\nimport type {TuiDataListAccessor} from './data-list.tokens';\nimport {TUI_DATA_LIST_HOST, tuiAsDataListAccessor} from './data-list.tokens';\nimport {TuiOptionWithValue} from './option/option.directive';\nimport {TUI_OPTION_CONTENT, TuiWithOptionContent} from './option/option-content';\nimport {TuiOption} from './option/option-legacy.component';\n\nexport function tuiInjectDataListSize(): TuiSizeL | TuiSizeS {\n    const sizes = ['s', 'm', 'l'] as const;\n    const size = inject(TUI_DATA_LIST_HOST, {optional: true})?.size;\n\n    return size && sizes.includes(size) ? size : 'l';\n}\n\n// TODO: Consider aria-activedescendant for proper accessibility implementation\n@Component({\n    standalone: true,\n    selector: 'tui-data-list',\n    imports: [NgIf, PolymorpheusOutlet],\n    templateUrl: './data-list.template.html',\n    styleUrls: ['./data-list.style.less'],\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        tuiAsDataListAccessor(TuiDataListComponent),\n        {\n            provide: TUI_OPTION_CONTENT,\n            useFactory: () =>\n                inject(TuiWithOptionContent, {optional: true})?.content ??\n                inject(TUI_OPTION_CONTENT, {skipSelf: true, optional: true}),\n        },\n    ],\n    host: {\n        role: 'listbox',\n        '[attr.data-size]': 'size',\n        '(focusin)': 'onFocusIn($event.relatedTarget, $event.currentTarget)',\n        '(mousedown.prevent)': '(0)',\n        '(wheel.zoneless.passive)': 'handleFocusLossIfNecessary()',\n        '(mouseleave)': 'handleFocusLossIfNecessary($event.target)',\n        '(keydown.tab)': 'handleFocusLossIfNecessary()',\n        '(keydown.shift.tab)': 'handleFocusLossIfNecessary()',\n        '(keydown.arrowDown.prevent)': 'onKeyDownArrow($event.target, 1)',\n        '(keydown.arrowUp.prevent)': 'onKeyDownArrow($event.target, -1)',\n    },\n})\nexport class TuiDataListComponent<T>\n    implements TuiDataListAccessor<T>, AfterContentChecked\n{\n    @ContentChildren(forwardRef(() => TuiOption), {descendants: true})\n    private readonly legacyOptions: QueryList<TuiOption<T>> = EMPTY_QUERY;\n\n    @ContentChildren(forwardRef(() => TuiOptionWithValue), {descendants: true})\n    private readonly options: QueryList<TuiOptionWithValue<T>> = EMPTY_QUERY;\n\n    private origin?: HTMLElement;\n    private readonly ngZone = inject(NgZone);\n    private readonly destroyRef = inject(DestroyRef);\n    private readonly el = tuiInjectElement();\n    private readonly cdr = inject(ChangeDetectorRef);\n    protected readonly fallback = toSignal(inject(TUI_NOTHING_FOUND_MESSAGE));\n    protected readonly empty = signal(false);\n\n    @Input()\n    public emptyContent: PolymorpheusContent;\n\n    @Input()\n    public size = tuiInjectDataListSize();\n\n    public onKeyDownArrow(current: HTMLElement, step: number): void {\n        const {elements} = this;\n\n        tuiMoveFocus(elements.indexOf(current), elements, step);\n    }\n\n    public handleFocusLossIfNecessary(element: Element = this.el): void {\n        if (tuiIsNativeFocusedIn(element)) {\n            this.origin?.focus({preventScroll: true});\n        }\n    }\n\n    // TODO: Refactor to :has after Safari support bumped to 15\n    public ngAfterContentChecked(): void {\n        timer(0)\n            .pipe(tuiZonefree(this.ngZone), tuiTakeUntilDestroyed(this.destroyRef))\n            .subscribe(() => {\n                this.empty.set(!this.elements.length);\n                this.cdr.detectChanges();\n            });\n    }\n\n    public getOptions(includeDisabled = false): readonly T[] {\n        return [\n            ...this.legacyOptions, // TODO(v5): delete\n            ...this.options,\n        ]\n            .filter(({disabled}) => includeDisabled || !disabled)\n            .map(({value}) => (isSignal(value) ? value() : value))\n            .filter(tuiIsPresent);\n    }\n\n    protected onFocusIn(relatedTarget: HTMLElement, currentTarget: HTMLElement): void {\n        if (!currentTarget.contains(relatedTarget) && !this.origin) {\n            this.origin = relatedTarget;\n        }\n    }\n\n    private get elements(): readonly HTMLElement[] {\n        return Array.from(this.el.querySelectorAll('[tuiOption]'));\n    }\n}\n","<ng-content />\n<div\n    *ngIf=\"empty()\"\n    class=\"t-empty\"\n>\n    <ng-container *polymorpheusOutlet=\"emptyContent || fallback() as text\">\n        {{ text }}\n    </ng-container>\n</div>\n","import type {Provider, Type} from '@angular/core';\nimport {Directive} from '@angular/core';\nimport {tuiProvide} from '@taiga-ui/cdk/utils/miscellaneous';\n\n@Directive({\n    standalone: true,\n    selector: 'ng-template[tuiDataList]',\n})\nexport class TuiDataListDirective {}\n\nexport function tuiAsDataList(list: Type<TuiDataListDirective>): Provider {\n    return tuiProvide(TuiDataListDirective, list);\n}\n","import {Directive, Input} from '@angular/core';\n\n@Directive({\n    standalone: true,\n    selector: 'tui-opt-group',\n    host: {\n        role: 'group',\n        '[attr.data-label]': 'label',\n    },\n})\nexport class TuiOptGroup {\n    @Input()\n    public label?: string | null;\n}\n","import {TuiDataListComponent} from './data-list.component';\nimport {TuiDataListDirective} from './data-list.directive';\nimport {TuiOptGroup} from './opt-group.directive';\nimport {TuiOptionNew, TuiOptionWithValue} from './option/option.directive';\nimport {TuiOption} from './option/option-legacy.component';\n\nexport const TuiDataList = [\n    TuiDataListComponent,\n    TuiDataListDirective,\n    TuiOption,\n    TuiOptionNew,\n    TuiOptionWithValue,\n    TuiOptGroup,\n] as const;\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAyBA;;AAEG;AACU,MAAA,sBAAsB,GAAG,cAAc,GAAwB;AAEtE,SAAU,qBAAqB,CAAC,QAAmC,EAAA;AACrE,IAAA,OAAO,CAAC,UAAU,CAAC,sBAAsB,EAAE,QAAQ,CAAC,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;AACpF,CAAC;AAED;;AAEG;AACU,MAAA,kBAAkB,GAAG,cAAc,GAA6B;AAEvE,SAAU,iBAAiB,CAAI,IAA8B,EAAA;AAC/D,IAAA,OAAO,UAAU,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;AAChD;;ACnCA;;AAEG;AACU,MAAA,kBAAkB,GAAG,cAAc,GAG5C;AAEE,SAAU,kBAAkB,CAC9B,QAEe,EAAA;IAEf,OAAO;AACH,QAAA,OAAO,EAAE,kBAAkB;QAC3B,QAAQ;KACX,CAAC;AACN,CAAC;AAED,MAGa,oBAAoB,CAAA;AAHjC,IAAA,WAAA,GAAA;QAKuB,IAAY,CAAA,YAAA,GAAqB,IAAI,CAAC;AAEtC,QAAA,IAAA,CAAA,aAAa,GAAG,MAAM,CAAY,kBAAkB,EAAE;AACrE,YAAA,QAAQ,EAAE,IAAI;AACjB,SAAA,CAAC,CAAC;AAKN,KAAA;AAHG,IAAA,IAAW,OAAO,GAAA;AACd,QAAA,OAAO,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,YAAY,CAAC;KAClD;+GAVQ,oBAAoB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;AAApB,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,oBAAoB,wFACf,kBAAkB,EAAA,WAAA,EAAA,IAAA,EAAA,CAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FADvB,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBAHhC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,UAAU,EAAE,IAAI;AACnB,iBAAA,CAAA;8BAGsB,YAAY,EAAA,CAAA;sBAD9B,YAAY;AAAC,gBAAA,IAAA,EAAA,CAAA,kBAAkB,EAAE,EAAC,WAAW,EAAE,IAAI,EAAC,CAAA;;;ACRzD;AACA;AACA,MAYa,YAAY,CAAA;AA6BrB,IAAA,WAAA,GAAA;AA5BiB,QAAA,IAAA,CAAA,GAAG,GAAG,MAAM,CAAC,gBAAgB,CAAC,CAAC;AAC/B,QAAA,IAAA,CAAA,QAAQ,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC;QACjC,IAAE,CAAA,EAAA,GAAG,gBAAgB,EAAE,CAAC;AACxB,QAAA,IAAA,CAAA,QAAQ,GAAG,MAAM,CAC9B,UAAU,CAAC,MAAM,oBAAoB,CAAC,EACtC,EAAC,QAAQ,EAAE,IAAI,EAAC,CACnB,CAAC;AAEe,QAAA,IAAA,CAAA,OAAO,GAAG,MAAM,CAAmB,kBAAkB,EAAE;AACpE,YAAA,QAAQ,EAAE,IAAI;AACjB,SAAA,CAAC,CAAC;QAEc,IAAG,CAAA,GAAA,GAChB,IAAI,CAAC,OAAO;AACZ,YAAA,eAAe,CAAC,IAAI,CAAC,OAAO,EAAE;AAC1B,gBAAA,mBAAmB,EAAE,MAAM,CAAC,mBAAmB,CAAC;AAChD,gBAAA,eAAe,EAAE,MAAM,CAAC,QAAQ,CAAC;gBACjC,WAAW,EAAE,gBAAgB,EAAE;AAClC,aAAA,CAAC,CAAC;AAEY,QAAA,IAAA,CAAA,QAAQ,GAAG,MAAM,CAAC,oBAAoB,EAAE;AACvD,YAAA,IAAI,EAAE,IAAI;AACV,YAAA,QAAQ,EAAE,IAAI;SACjB,CAAC,EAAE,GAAG,CAAC;QAGD,IAAQ,CAAA,QAAA,GAAG,KAAK,CAAC;QAGpB,IAAI,IAAI,CAAC,GAAG,EAAE;YACV,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACnC,YAAA,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,aAAa,EAAE,CAAC;AAC9C,SAAA;KACJ;;IAGM,WAAW,GAAA;QACd,IAAI,CAAC,QAAQ,EAAE,0BAA0B,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;KACtD;IAES,WAAW,GAAA;QACjB,IACI,CAAC,IAAI,CAAC,QAAQ;AACd,YAAA,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,CAAC;AAC5B,YAAA,IAAI,CAAC,QAAQ;AACb,YAAA,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,8BAA8B,CAAC,EACjD;YACE,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,EAAC,aAAa,EAAE,IAAI,EAAC,CAAC,CAAC;AACxC,SAAA;KACJ;+GAlDQ,YAAY,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAAZ,YAAY,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,kEAAA,EAAA,MAAA,EAAA,EAAA,QAAA,EAAA,UAAA,EAAA,EAAA,IAAA,EAAA,EAAA,UAAA,EAAA,EAAA,MAAA,EAAA,QAAA,EAAA,MAAA,EAAA,QAAA,EAAA,EAAA,SAAA,EAAA,EAAA,oBAAA,EAAA,eAAA,EAAA,EAAA,UAAA,EAAA,EAAA,eAAA,EAAA,kBAAA,EAAA,sBAAA,EAAA,cAAA,EAAA,EAAA,EAAA,cAAA,EAAA,CAAA,EAAA,SAAA,EAAA,EAAA,CAAA,YAAA,EAAA,CAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAAZ,YAAY,EAAA,UAAA,EAAA,CAAA;kBAZxB,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,UAAU,EAAE,IAAI;AAChB,oBAAA,QAAQ,EAAE,kEAAkE;oBAC5E,cAAc,EAAE,CAAC,YAAY,CAAC;AAC9B,oBAAA,IAAI,EAAE;AACF,wBAAA,IAAI,EAAE,QAAQ;AACd,wBAAA,IAAI,EAAE,QAAQ;AACd,wBAAA,iBAAiB,EAAE,kBAAkB;AACrC,wBAAA,wBAAwB,EAAE,cAAc;AACxC,wBAAA,sBAAsB,EAAE,eAAe;AAC1C,qBAAA;AACJ,iBAAA,CAAA;0EA4BU,QAAQ,EAAA,CAAA;sBADd,KAAK;;AA2BV;AACA,MAKa,kBAAkB,CAAA;AAL/B,IAAA,WAAA,GAAA;QAOW,IAAQ,CAAA,QAAA,GAAG,KAAK,CAAC;AAER,QAAA,IAAA,CAAA,KAAK,GAAG,MAAM,CAAgB,SAAS,CAAC,CAAC;AAO5D,KAAA;;IAJG,IACW,WAAW,CAAC,CAAI,EAAA;AACvB,QAAA,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KACrB;+GAVQ,kBAAkB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAAlB,kBAAkB,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,uFAAA,EAAA,MAAA,EAAA,EAAA,QAAA,EAAA,UAAA,EAAA,WAAA,EAAA,CAAA,OAAA,EAAA,aAAA,CAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAAlB,kBAAkB,EAAA,UAAA,EAAA,CAAA;kBAL9B,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,UAAU,EAAE,IAAI;AAChB,oBAAA,QAAQ,EACJ,uFAAuF;AAC9F,iBAAA,CAAA;8BAGU,QAAQ,EAAA,CAAA;sBADd,KAAK;gBAOK,WAAW,EAAA,CAAA;sBADrB,KAAK;AAAC,gBAAA,IAAA,EAAA,CAAA,EAAC,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAA;;;AC/E3C;;;AAGG;AACH,MAwBa,SAAS,CAAA;AAxBtB,IAAA,WAAA,GAAA;AAyBqB,QAAA,IAAA,CAAA,QAAQ,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC;QACjC,IAAE,CAAA,EAAA,GAAG,gBAAgB,EAAE,CAAC;AACxB,QAAA,IAAA,CAAA,QAAQ,GAAG,MAAM,CAC9B,UAAU,CAAC,MAAM,oBAAoB,CAAC,EACtC,EAAC,QAAQ,EAAE,IAAI,EAAC,CACnB,CAAC;AAEe,QAAA,IAAA,CAAA,IAAI,GAAG,MAAM,CAAqB,kBAAkB,EAAE;AACnE,YAAA,QAAQ,EAAE,IAAI;AACjB,SAAA,CAAC,CAAC;QAEgB,IAAO,CAAA,OAAA,GAEtB,MAAM,CAAC,kBAAkB,EAAE,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;AAE9B,QAAA,IAAA,CAAA,QAAQ,GAAG,MAAM,CAAC,oBAAoB,EAAE;AACvD,YAAA,IAAI,EAAE,IAAI;AACV,YAAA,QAAQ,EAAE,IAAI;SACjB,CAAC,EAAE,GAAG,CAAC;QAGD,IAAQ,CAAA,QAAA,GAAG,KAAK,CAAC;AA0B3B,KAAA;;IApBU,WAAW,GAAA;QACd,IAAI,CAAC,QAAQ,EAAE,0BAA0B,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;KACtD;IAES,OAAO,GAAA;QACb,IAAI,IAAI,CAAC,IAAI,EAAE,YAAY,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,EAAE;YACrD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACtC,SAAA;KACJ;IAES,WAAW,GAAA;QACjB,IACI,CAAC,IAAI,CAAC,QAAQ;AACd,YAAA,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,CAAC;AAC5B,YAAA,IAAI,CAAC,QAAQ;AACb,YAAA,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,8BAA8B,CAAC,EACjD;YACE,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,EAAC,aAAa,EAAE,IAAI,EAAC,CAAC,CAAC;AACxC,SAAA;KACJ;+GA/CQ,SAAS,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;AAAT,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,SAAS,EAnBR,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,oFAAA,EAAA,MAAA,EAAA,EAAA,QAAA,EAAA,UAAA,EAAA,KAAA,EAAA,OAAA,EAAA,EAAA,IAAA,EAAA,EAAA,UAAA,EAAA,EAAA,MAAA,EAAA,QAAA,EAAA,MAAA,EAAA,QAAA,EAAA,EAAA,SAAA,EAAA,EAAA,OAAA,EAAA,WAAA,EAAA,oBAAA,EAAA,eAAA,EAAA,EAAA,UAAA,EAAA,EAAA,eAAA,EAAA,kBAAA,EAAA,sBAAA,EAAA,cAAA,EAAA,EAAA,EAAA,cAAA,EAAA,CAAA,EAAA,SAAA,EAAA,EAAA,CAAA,YAAA,EAAA,CAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EAAA,CAAA;;;;;;;AAOT,IAAA,CAAA,EAAA,QAAA,EAAA,IAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EARS,kBAAkB,EAAA,QAAA,EAAA,sBAAA,EAAA,MAAA,EAAA,CAAA,oBAAA,EAAA,2BAAA,CAAA,EAAA,CAAA,EAAA,eAAA,EAAA,EAAA,CAAA,uBAAA,CAAA,MAAA,EAAA,CAAA,CAAA,EAAA;;4FAoBnB,SAAS,EAAA,UAAA,EAAA,CAAA;kBAxBrB,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,UAAU,EAAE,IAAI;AAChB,oBAAA,QAAQ,EACJ,oFAAoF;oBACxF,OAAO,EAAE,CAAC,kBAAkB,CAAC;AAC7B,oBAAA,QAAQ,EAAE,CAAA;;;;;;;AAOT,IAAA,CAAA;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;oBAC/C,cAAc,EAAE,CAAC,YAAY,CAAC;AAC9B,oBAAA,IAAI,EAAE;AACF,wBAAA,IAAI,EAAE,QAAQ;AACd,wBAAA,IAAI,EAAE,QAAQ;AACd,wBAAA,iBAAiB,EAAE,kBAAkB;AACrC,wBAAA,wBAAwB,EAAE,cAAc;AACxC,wBAAA,SAAS,EAAE,WAAW;AACtB,wBAAA,sBAAsB,EAAE,eAAe;AAC1C,qBAAA;AACJ,iBAAA,CAAA;8BAuBU,QAAQ,EAAA,CAAA;sBADd,KAAK;gBAIC,KAAK,EAAA,CAAA;sBADX,KAAK;;;SCxCM,qBAAqB,GAAA;IACjC,MAAM,KAAK,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAU,CAAC;AACvC,IAAA,MAAM,IAAI,GAAG,MAAM,CAAC,kBAAkB,EAAE,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC,EAAE,IAAI,CAAC;AAEhE,IAAA,OAAO,IAAI,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,GAAG,CAAC;AACrD,CAAC;AAED;AACA,MA8Ba,oBAAoB,CAAA;AA9BjC,IAAA,WAAA,GAAA;QAkCqB,IAAa,CAAA,aAAA,GAA4B,WAAW,CAAC;QAGrD,IAAO,CAAA,OAAA,GAAqC,WAAW,CAAC;AAGxD,QAAA,IAAA,CAAA,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;AACxB,QAAA,IAAA,CAAA,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;QAChC,IAAE,CAAA,EAAA,GAAG,gBAAgB,EAAE,CAAC;AACxB,QAAA,IAAA,CAAA,GAAG,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC9B,IAAQ,CAAA,QAAA,GAAG,QAAQ,CAAC,MAAM,CAAC,yBAAyB,CAAC,CAAC,CAAC;AACvD,QAAA,IAAA,CAAA,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;QAMlC,IAAI,CAAA,IAAA,GAAG,qBAAqB,EAAE,CAAC;AA2CzC,KAAA;IAzCU,cAAc,CAAC,OAAoB,EAAE,IAAY,EAAA;AACpD,QAAA,MAAM,EAAC,QAAQ,EAAC,GAAG,IAAI,CAAC;AAExB,QAAA,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;KAC3D;AAEM,IAAA,0BAA0B,CAAC,OAAA,GAAmB,IAAI,CAAC,EAAE,EAAA;AACxD,QAAA,IAAI,oBAAoB,CAAC,OAAO,CAAC,EAAE;YAC/B,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,EAAC,aAAa,EAAE,IAAI,EAAC,CAAC,CAAC;AAC7C,SAAA;KACJ;;IAGM,qBAAqB,GAAA;QACxB,KAAK,CAAC,CAAC,CAAC;AACH,aAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aACtE,SAAS,CAAC,MAAK;AACZ,YAAA,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AACtC,YAAA,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;AAC7B,SAAC,CAAC,CAAC;KACV;IAEM,UAAU,CAAC,eAAe,GAAG,KAAK,EAAA;QACrC,OAAO;YACH,GAAG,IAAI,CAAC,aAAa;YACrB,GAAG,IAAI,CAAC,OAAO;AAClB,SAAA;AACI,aAAA,MAAM,CAAC,CAAC,EAAC,QAAQ,EAAC,KAAK,eAAe,IAAI,CAAC,QAAQ,CAAC;aACpD,GAAG,CAAC,CAAC,EAAC,KAAK,EAAC,MAAM,QAAQ,CAAC,KAAK,CAAC,GAAG,KAAK,EAAE,GAAG,KAAK,CAAC,CAAC;aACrD,MAAM,CAAC,YAAY,CAAC,CAAC;KAC7B;IAES,SAAS,CAAC,aAA0B,EAAE,aAA0B,EAAA;AACtE,QAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AACxD,YAAA,IAAI,CAAC,MAAM,GAAG,aAAa,CAAC;AAC/B,SAAA;KACJ;AAED,IAAA,IAAY,QAAQ,GAAA;AAChB,QAAA,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAAC;KAC9D;+GA/DQ,oBAAoB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;AAApB,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,oBAAoB,EAtBlB,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,eAAA,EAAA,MAAA,EAAA,EAAA,YAAA,EAAA,cAAA,EAAA,IAAA,EAAA,MAAA,EAAA,EAAA,IAAA,EAAA,EAAA,UAAA,EAAA,EAAA,MAAA,EAAA,SAAA,EAAA,EAAA,SAAA,EAAA,EAAA,SAAA,EAAA,uDAAA,EAAA,mBAAA,EAAA,KAAA,EAAA,wBAAA,EAAA,8BAAA,EAAA,YAAA,EAAA,2CAAA,EAAA,aAAA,EAAA,8BAAA,EAAA,mBAAA,EAAA,8BAAA,EAAA,2BAAA,EAAA,kCAAA,EAAA,yBAAA,EAAA,mCAAA,EAAA,EAAA,UAAA,EAAA,EAAA,gBAAA,EAAA,MAAA,EAAA,EAAA,EAAA,SAAA,EAAA;YACP,qBAAqB,CAAC,oBAAoB,CAAC;AAC3C,YAAA;AACI,gBAAA,OAAO,EAAE,kBAAkB;AAC3B,gBAAA,UAAU,EAAE,MACR,MAAM,CAAC,oBAAoB,EAAE,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC,EAAE,OAAO;AACvD,oBAAA,MAAM,CAAC,kBAAkB,EAAE,EAAC,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC;AACnE,aAAA;SACJ,EAiBiC,OAAA,EAAA,CAAA,EAAA,YAAA,EAAA,eAAA,EAAA,SAAA,EAAA,EAAA,CAAA,UAAA,CAAA,YAAA,EAAA,OAAA,SAAS,oGAGT,kBAAkB,CAAA,EAAA,CAAA,EAAA,WAAA,EAAA,IAAA,EAAA,CAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EC9ExD,yMASA,EDoCc,MAAA,EAAA,CAAA,ykIAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,IAAI,6FAAE,kBAAkB,EAAA,QAAA,EAAA,sBAAA,EAAA,MAAA,EAAA,CAAA,oBAAA,EAAA,2BAAA,CAAA,EAAA,CAAA,EAAA,eAAA,EAAA,EAAA,CAAA,uBAAA,CAAA,MAAA,EAAA,aAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,IAAA,EAAA,CAAA,CAAA,EAAA;;4FA2BzB,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBA9BhC,SAAS;AACM,YAAA,IAAA,EAAA,CAAA,EAAA,UAAA,EAAA,IAAI,YACN,eAAe,EAAA,OAAA,EAChB,CAAC,IAAI,EAAE,kBAAkB,CAAC,EAGpB,aAAA,EAAA,iBAAiB,CAAC,IAAI,EAAA,eAAA,EACpB,uBAAuB,CAAC,MAAM,EACpC,SAAA,EAAA;AACP,wBAAA,qBAAqB,CAAsB,oBAAA,CAAA;AAC3C,wBAAA;AACI,4BAAA,OAAO,EAAE,kBAAkB;AAC3B,4BAAA,UAAU,EAAE,MACR,MAAM,CAAC,oBAAoB,EAAE,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC,EAAE,OAAO;AACvD,gCAAA,MAAM,CAAC,kBAAkB,EAAE,EAAC,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC;AACnE,yBAAA;qBACJ,EACK,IAAA,EAAA;AACF,wBAAA,IAAI,EAAE,SAAS;AACf,wBAAA,kBAAkB,EAAE,MAAM;AAC1B,wBAAA,WAAW,EAAE,uDAAuD;AACpE,wBAAA,qBAAqB,EAAE,KAAK;AAC5B,wBAAA,0BAA0B,EAAE,8BAA8B;AAC1D,wBAAA,cAAc,EAAE,2CAA2C;AAC3D,wBAAA,eAAe,EAAE,8BAA8B;AAC/C,wBAAA,qBAAqB,EAAE,8BAA8B;AACrD,wBAAA,6BAA6B,EAAE,kCAAkC;AACjE,wBAAA,2BAA2B,EAAE,mCAAmC;AACnE,qBAAA,EAAA,QAAA,EAAA,yMAAA,EAAA,MAAA,EAAA,CAAA,ykIAAA,CAAA,EAAA,CAAA;8BAMgB,aAAa,EAAA,CAAA;sBAD7B,eAAe;uBAAC,UAAU,CAAC,MAAM,SAAS,CAAC,EAAE,EAAC,WAAW,EAAE,IAAI,EAAC,CAAA;gBAIhD,OAAO,EAAA,CAAA;sBADvB,eAAe;uBAAC,UAAU,CAAC,MAAM,kBAAkB,CAAC,EAAE,EAAC,WAAW,EAAE,IAAI,EAAC,CAAA;gBAYnE,YAAY,EAAA,CAAA;sBADlB,KAAK;gBAIC,IAAI,EAAA,CAAA;sBADV,KAAK;;;AExFV,MAIa,oBAAoB,CAAA;+GAApB,oBAAoB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAApB,oBAAoB,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,0BAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAApB,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBAJhC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,UAAU,EAAE,IAAI;AAChB,oBAAA,QAAQ,EAAE,0BAA0B;AACvC,iBAAA,CAAA;;AAGK,SAAU,aAAa,CAAC,IAAgC,EAAA;AAC1D,IAAA,OAAO,UAAU,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;AAClD;;ACVA,MAQa,WAAW,CAAA;+GAAX,WAAW,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAAX,WAAW,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,eAAA,EAAA,MAAA,EAAA,EAAA,KAAA,EAAA,OAAA,EAAA,EAAA,IAAA,EAAA,EAAA,UAAA,EAAA,EAAA,MAAA,EAAA,OAAA,EAAA,EAAA,UAAA,EAAA,EAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAAX,WAAW,EAAA,UAAA,EAAA,CAAA;kBARvB,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACP,oBAAA,UAAU,EAAE,IAAI;AAChB,oBAAA,QAAQ,EAAE,eAAe;AACzB,oBAAA,IAAI,EAAE;AACF,wBAAA,IAAI,EAAE,OAAO;AACb,wBAAA,mBAAmB,EAAE,OAAO;AAC/B,qBAAA;AACJ,iBAAA,CAAA;8BAGU,KAAK,EAAA,CAAA;sBADX,KAAK;;;ACLG,MAAA,WAAW,GAAG;IACvB,oBAAoB;IACpB,oBAAoB;IACpB,SAAS;IACT,YAAY;IACZ,kBAAkB;IAClB,WAAW;;;ACZf;;AAEG;;;;"}