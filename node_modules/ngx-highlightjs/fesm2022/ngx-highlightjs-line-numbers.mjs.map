{"version":3,"file":"ngx-highlightjs-line-numbers.mjs","sources":["../../../projects/ngx-highlightjs/line-numbers/src/line-numbers.ts","../../../projects/ngx-highlightjs/line-numbers/src/ngx-highlightjs-line-numbers.ts"],"sourcesContent":["export function activateLineNumbers() {\r\n  const w: any = window;\r\n  const d: Document = document;\r\n\r\n  var TABLE_NAME = 'hljs-ln',\r\n    LINE_NAME = 'hljs-ln-line',\r\n    CODE_BLOCK_NAME = 'hljs-ln-code',\r\n    NUMBERS_BLOCK_NAME = 'hljs-ln-numbers',\r\n    NUMBER_LINE_NAME = 'hljs-ln-n',\r\n    DATA_ATTR_NAME = 'data-line-number',\r\n    BREAK_LINE_REGEXP = /\\r\\n|\\r|\\n/g;\r\n\r\n  if (w.hljs) {\r\n    w.hljs.initLineNumbersOnLoad = initLineNumbersOnLoad;\r\n    w.hljs.lineNumbersBlock = lineNumbersBlock;\r\n    w.hljs.lineNumbersValue = lineNumbersValue;\r\n\r\n    addStyles();\r\n  } else {\r\n    w.console.error('highlight.js not detected!');\r\n  }\r\n\r\n  function isHljsLnCodeDescendant(domElt) {\r\n    var curElt = domElt;\r\n    while (curElt) {\r\n      if (curElt.className && curElt.className.indexOf('hljs-ln-code') !== -1) {\r\n        return true;\r\n      }\r\n      curElt = curElt.parentNode;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function getHljsLnTable(hljsLnDomElt) {\r\n    var curElt = hljsLnDomElt;\r\n    while (curElt.nodeName !== 'TABLE') {\r\n      curElt = curElt.parentNode;\r\n    }\r\n    return curElt;\r\n  }\r\n\r\n  // Function to workaround a copy issue with Microsoft Edge.\r\n  // Due to hljs-ln wrapping the lines of code inside a <table> element,\r\n  // itself wrapped inside a <pre> element, window.getSelection().toString()\r\n  // does not contain any line breaks. So we need to get them back using the\r\n  // rendered code in the DOM as reference.\r\n  function edgeGetSelectedCodeLines(selection) {\r\n    // current selected text without line breaks\r\n    var selectionText = selection.toString();\r\n\r\n    // get the <td> element wrapping the first line of selected code\r\n    var tdAnchor = selection.anchorNode;\r\n    while (tdAnchor.nodeName !== 'TD') {\r\n      tdAnchor = tdAnchor.parentNode;\r\n    }\r\n\r\n    // get the <td> element wrapping the last line of selected code\r\n    var tdFocus = selection.focusNode;\r\n    while (tdFocus.nodeName !== 'TD') {\r\n      tdFocus = tdFocus.parentNode;\r\n    }\r\n\r\n    // extract line numbers\r\n    var firstLineNumber = parseInt(tdAnchor.dataset.lineNumber);\r\n    var lastLineNumber = parseInt(tdFocus.dataset.lineNumber);\r\n\r\n    // multi-lines copied case\r\n    if (firstLineNumber != lastLineNumber) {\r\n\r\n      var firstLineText = tdAnchor.textContent;\r\n      var lastLineText = tdFocus.textContent;\r\n\r\n      // if the selection was made backward, swap values\r\n      if (firstLineNumber > lastLineNumber) {\r\n        var tmp = firstLineNumber;\r\n        firstLineNumber = lastLineNumber;\r\n        lastLineNumber = tmp;\r\n        tmp = firstLineText;\r\n        firstLineText = lastLineText;\r\n        lastLineText = tmp;\r\n      }\r\n\r\n      // discard not copied characters in first line\r\n      while (selectionText.indexOf(firstLineText) !== 0) {\r\n        firstLineText = firstLineText.slice(1);\r\n      }\r\n\r\n      // discard not copied characters in last line\r\n      while (selectionText.lastIndexOf(lastLineText) === -1) {\r\n        lastLineText = lastLineText.slice(0, -1);\r\n      }\r\n\r\n      // reconstruct and return the real copied text\r\n      var selectedText = firstLineText;\r\n      var hljsLnTable = getHljsLnTable(tdAnchor);\r\n      for (var i = firstLineNumber + 1; i < lastLineNumber; ++i) {\r\n        var codeLineSel = format('.{0}[{1}=\"{2}\"]', [CODE_BLOCK_NAME, DATA_ATTR_NAME, i]);\r\n        var codeLineElt = hljsLnTable.querySelector(codeLineSel);\r\n        selectedText += '\\n' + codeLineElt.textContent;\r\n      }\r\n      selectedText += '\\n' + lastLineText;\r\n      return selectedText;\r\n      // single copied line case\r\n    } else {\r\n      return selectionText;\r\n    }\r\n  }\r\n\r\n  // ensure consistent code copy/paste behavior across all browsers\r\n  // (see https://github.com/wcoder/highlightjs-line-numbers.js/issues/51)\r\n  document.addEventListener('copy', function(e) {\r\n    // get current selection\r\n    var selection = window.getSelection();\r\n    // override behavior when one wants to copy line of codes\r\n    if (isHljsLnCodeDescendant(selection.anchorNode)) {\r\n      var selectionText;\r\n      // workaround an issue with Microsoft Edge as copied line breaks\r\n      // are removed otherwise from the selection string\r\n      if (window.navigator.userAgent.indexOf('Edge') !== -1) {\r\n        selectionText = edgeGetSelectedCodeLines(selection);\r\n      } else {\r\n        // other browsers can directly use the selection string\r\n        selectionText = selection.toString();\r\n      }\r\n      e.clipboardData.setData('text/plain', selectionText);\r\n      e.preventDefault();\r\n    }\r\n  });\r\n\r\n  function addStyles() {\r\n    var css = d.createElement('style');\r\n    css.type = 'text/css';\r\n    css.innerHTML = format(\r\n      '.{0}{border-collapse:collapse}' +\r\n      '.{0} td{padding:0}' +\r\n      '.{1}:before{content:attr({2})}',\r\n      [\r\n        TABLE_NAME,\r\n        NUMBER_LINE_NAME,\r\n        DATA_ATTR_NAME\r\n      ]);\r\n    d.getElementsByTagName('head')[0].appendChild(css);\r\n  }\r\n\r\n  function initLineNumbersOnLoad(options) {\r\n    if (d.readyState === 'interactive' || d.readyState === 'complete') {\r\n      documentReady(options);\r\n    } else {\r\n      w.addEventListener('DOMContentLoaded', function() {\r\n        documentReady(options);\r\n      });\r\n    }\r\n  }\r\n\r\n  function documentReady(options) {\r\n    try {\r\n      var blocks = d.querySelectorAll('code.hljs,code.nohighlight');\r\n\r\n      for (var i in blocks) {\r\n        if (blocks.hasOwnProperty(i)) {\r\n          if (!isPluginDisabledForBlock(blocks[i])) {\r\n            lineNumbersBlock(blocks[i], options);\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      w.console.error('LineNumbers error: ', e);\r\n    }\r\n  }\r\n\r\n  function isPluginDisabledForBlock(element) {\r\n    return element.classList.contains('nohljsln');\r\n  }\r\n\r\n  function lineNumbersBlock(element, options) {\r\n    if (typeof element !== 'object') {\r\n      return;\r\n    }\r\n\r\n    async(function() {\r\n      element.innerHTML = lineNumbersInternal(element, options);\r\n    });\r\n  }\r\n\r\n  function lineNumbersValue(value, options) {\r\n    if (typeof value !== 'string') {\r\n      return;\r\n    }\r\n\r\n    var element = document.createElement('code');\r\n    element.innerHTML = value;\r\n\r\n    return lineNumbersInternal(element, options);\r\n  }\r\n\r\n  function lineNumbersInternal(element, options) {\r\n\r\n    var internalOptions = mapOptions(element, options);\r\n\r\n    duplicateMultilineNodes(element);\r\n\r\n    return addLineNumbersBlockFor(element.innerHTML, internalOptions);\r\n  }\r\n\r\n  function addLineNumbersBlockFor(inputHtml, options) {\r\n    var lines = getLines(inputHtml);\r\n\r\n    // if last line contains only carriage return remove it\r\n    if (lines[lines.length - 1].trim() === '') {\r\n      lines.pop();\r\n    }\r\n\r\n    if (lines.length > 1 || options.singleLine) {\r\n      var html = '';\r\n\r\n      for (var i = 0, l = lines.length; i < l; i++) {\r\n        html += format(\r\n          '<tr>' +\r\n          '<td class=\"{0} {1}\" {3}=\"{5}\">' +\r\n          '<div class=\"{2}\" {3}=\"{5}\"></div>' +\r\n          '</td>' +\r\n          '<td class=\"{0} {4}\" {3}=\"{5}\">' +\r\n          '{6}' +\r\n          '</td>' +\r\n          '</tr>',\r\n          [\r\n            LINE_NAME,\r\n            NUMBERS_BLOCK_NAME,\r\n            NUMBER_LINE_NAME,\r\n            DATA_ATTR_NAME,\r\n            CODE_BLOCK_NAME,\r\n            i + options.startFrom,\r\n            lines[i].length > 0 ? lines[i] : ' '\r\n          ]);\r\n      }\r\n\r\n      return format('<table class=\"{0}\">{1}</table>', [TABLE_NAME, html]);\r\n    }\r\n\r\n    return inputHtml;\r\n  }\r\n\r\n  /**\r\n   * @param {HTMLElement} element Code block.\r\n   * @param {Object} options External API options.\r\n   * @returns {Object} Internal API options.\r\n   */\r\n  function mapOptions(element, options) {\r\n    options = options || {};\r\n    return {\r\n      singleLine: getSingleLineOption(options),\r\n      startFrom: getStartFromOption(element, options)\r\n    };\r\n  }\r\n\r\n  function getSingleLineOption(options) {\r\n    var defaultValue = false;\r\n    if (!!options.singleLine) {\r\n      return options.singleLine;\r\n    }\r\n    return defaultValue;\r\n  }\r\n\r\n  function getStartFromOption(element, options) {\r\n    var defaultValue = 1;\r\n    var startFrom = defaultValue;\r\n\r\n    if (isFinite(options.startFrom)) {\r\n      startFrom = options.startFrom;\r\n    }\r\n\r\n    // can be overridden because local option is priority\r\n    var value = getAttribute(element, 'data-ln-start-from');\r\n    if (value !== null) {\r\n      startFrom = toNumber(value, defaultValue);\r\n    }\r\n\r\n    return startFrom;\r\n  }\r\n\r\n  /**\r\n   * Recursive method for fix multi-line elements implementation in highlight.js\r\n   * Doing deep passage on child nodes.\r\n   * @param {HTMLElement} element\r\n   */\r\n  function duplicateMultilineNodes(element) {\r\n    var nodes = element.childNodes;\r\n    for (var node in nodes) {\r\n      if (nodes.hasOwnProperty(node)) {\r\n        var child = nodes[node];\r\n        if (getLinesCount(child.textContent) > 0) {\r\n          if (child.childNodes.length > 0) {\r\n            duplicateMultilineNodes(child);\r\n          } else {\r\n            duplicateMultilineNode(child.parentNode);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Method for fix multi-line elements implementation in highlight.js\r\n   * @param {HTMLElement} element\r\n   */\r\n  function duplicateMultilineNode(element) {\r\n    var className = element.className;\r\n\r\n    if (!/hljs-/.test(className)) {\r\n      return;\r\n    }\r\n\r\n    var lines = getLines(element.innerHTML);\r\n\r\n    for (var i = 0, result = ''; i < lines.length; i++) {\r\n      var lineText = lines[i].length > 0 ? lines[i] : ' ';\r\n      result += format('<span class=\"{0}\">{1}</span>\\n', [className, lineText]);\r\n    }\r\n\r\n    element.innerHTML = result.trim();\r\n  }\r\n\r\n  function getLines(text) {\r\n    if (text.length === 0) {\r\n      return [];\r\n    }\r\n    return text.split(BREAK_LINE_REGEXP);\r\n  }\r\n\r\n  function getLinesCount(text) {\r\n    return (text.trim().match(BREAK_LINE_REGEXP) || []).length;\r\n  }\r\n\r\n  ///\r\n  /// HELPERS\r\n  ///\r\n\r\n  function async(func) {\r\n    w.setTimeout(func, 0);\r\n  }\r\n\r\n  /**\r\n   * {@link https://wcoder.github.io/notes/string-format-for-string-formating-in-javascript}\r\n   * @param {string} format\r\n   * @param {array} args\r\n   */\r\n  function format(format, args) {\r\n    return format.replace(/\\{(\\d+)\\}/g, function(m, n) {\r\n      return args[n] !== undefined ? args[n] : m;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param {HTMLElement} element Code block.\r\n   * @param {String} attrName Attribute name.\r\n   * @returns {String} Attribute value or empty.\r\n   */\r\n  function getAttribute(element, attrName) {\r\n    return element.hasAttribute(attrName) ? element.getAttribute(attrName) : null;\r\n  }\r\n\r\n  /**\r\n   * @param {String} str Source string.\r\n   * @param {Number} fallback Fallback value.\r\n   * @returns Parsed number or fallback value.\r\n   */\r\n  function toNumber(str, fallback) {\r\n    if (!str) {\r\n      return fallback;\r\n    }\r\n    var number = Number(str);\r\n    return isFinite(number) ? number : fallback;\r\n  }\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}